<%- include('../include/admin-header') %>
    <div class="admin-templates-container" style="min-height: 400px;">

        <div class="d-flex justify-content-end">

            <input id="admin-remove" type="submit" class="btn btn-sm btn-danger text text-white"
                value="removed saved Templates">

            <div class="btn btn-sm btn-success" id="display-add-templates-form-btn">+ Add Templates</div>

        </div>
        <div class="admin-message btn btn-md btn-success" style="display: none;width: 300px;"></div>
        <div class="hide" id="template-form">
            <div class=" d-flex justify-content-center bg-light p-1 m-1">
                <form action="/add-template" method="POST" enctype="multipart/form-data" class="add-templates-form ">

                    <div
                        class="d-flex gap-20 justify-content-between flex-direction-column align-items-start form my-1">
                        <div class="d-flex flex-direction-column align-items-start">
                            <label for="">Template Name</label>
                            <input required name="template_name" type="text" placeholder="Template Name"
                                autocomplete="off" value="" id="template-name" />
                        </div>
                        <div class="d-flex flex-direction-column align-items-start">
                            <label for="">Template Description</label>

                            <input required name="template_description" type="text" placeholder="Template Description"
                                id="template-description" autocomplete="off" value="" />
                        </div>
                        <input type="hidden" name="json_file" id="json_file">

                        <!-- <label class="custom-file-upload">
                            <input type="file" />
                            Upload display image
                        </label> -->
                        <div class="d-flex flex-direction-column align-items-start custom-file-upload ">
                            <label for=""> Upload canvas image</label>

                            <input required type="file" name="image" accept='image/*' />

                        </div>
                        <div class="d-flex flex-direction-column align-items-start custom-file-upload">
                            <label for=""> Upload Json File</label>

                            <input required type="file" id="json-file" accept='application/JSON' />

                        </div>

                    </div>
                    <div class="d-flex justify-content-between align-items-end">
                        <div>
                            <button type="submit" id="" class="btn btn-md btn-dark template-btn">sumbit
                                Template</button>

                        </div>


                    </div>
                </form>
            </div>
        </div>


        <div class="my-2 d-flex  align-items-start templates" style="width: 100%;">
            <% data.forEach((data)=>{%>

                <div>
                    <a href="/canvas?id=<%= data.template_id %> " target="_blank">
                        <div class="hover-opactiy d-flex  justify-content-center flex-direction-column"
                            style="width: 200px;">
                            <img src="images/ci/<%= data.canvas_image %>" width="170" alt="">
                            <h3 class="text text-dark">
                                <%= data.template_name %>
                            </h3>

                        </div>

                    </a>
                </div>

                <% }) %>


        </div>

    </div>
    <script>
        document.getElementById("admin-remove").addEventListener("click", () => {


            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = () => {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    // console.log(xhttp.responseText);

                    let element = document.querySelector('.admin-message')
                    element.innerHTML = xhttp.responseText
                    element.style.display = 'block'

                    setTimeout(() => {
                        element.style.display = 'none'

                    }, 2000)
                }
            };
            xhttp.open(
                "POST",
                `http://localhost:5000/remove`,
                true
            );
            xhttp.send();
        });
    </script>
    <%- include('../include/footer') %>